import { api } from '../system/use-trpc';\n\nexport function useSubscription() {\n  const { data: userPlan, isLoading } = api.subscription.getUserPlan.useQuery();\n  const { data: availablePlans } = api.subscription.getAvailablePlans.useQuery();\n  \n  const subscribeMutation = api.subscription.subscribeToPlan.useMutation();\n  const cancelMutation = api.subscription.cancelSubscription.useMutation();\n  \n  const subscribe = (planId: string, paymentMethodId?: string) => {\n    return subscribeMutation.mutateAsync({ planId, paymentMethodId });\n  };\n  \n  const cancel = () => {\n    return cancelMutation.mutateAsync();\n  };\n  \n  return {\n    currentPlan: userPlan,\n    availablePlans,\n    isLoading,\n    subscribe,\n    cancel,\n    isSubscribing: subscribeMutation.isLoading,\n    isCancelling: cancelMutation.isLoading,\n  };\n}