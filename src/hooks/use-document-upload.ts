import { useState } from 'react';\nimport { api } from './use-trpc';\n\nexport function useDocumentUpload() {\n  const [isUploading, setIsUploading] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n  \n  const uploadDocument = async (file: File, type: string) => {\n    setIsUploading(true);\n    setProgress(0);\n    setError(null);\n    \n    try {\n      // Création d'un FormData pour l'upload\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('type', type);\n      \n      // Upload du fichier via une requête fetch\n      const response = await fetch('/api/upload', {\n        method: 'POST',\n        body: formData,\n      });\n      \n      if (!response.ok) {\n        throw new Error('Erreur lors de l\'upload du document');\n      }\n      \n      const data = await response.json();\n      return data;\n    } catch (err: any) {\n      setError(err.message);\n      throw err;\n    } finally {\n      setIsUploading(false);\n      setProgress(100);\n    }\n  };\n  \n  return {\n    uploadDocument,\n    isUploading,\n    progress,\n    error,\n  };\n}